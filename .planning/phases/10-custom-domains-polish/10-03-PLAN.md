---
phase: 10-custom-domains-polish
plan: 03
type: execute
wave: 3
depends_on: ["10-02"]
files_modified:
  - wedding-platform/src/app/(platform)/dashboard/domain/page.tsx
  - wedding-platform/src/components/domains/DomainConfigForm.tsx
  - wedding-platform/src/components/domains/DnsInstructions.tsx
  - wedding-platform/src/components/domains/VerificationStatus.tsx
  - wedding-platform/src/app/(platform)/dashboard/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Couple can navigate to domain settings from dashboard"
    - "Couple can enter a custom domain"
    - "Couple sees DNS instructions after adding domain"
    - "Couple can check verification status"
    - "Couple can remove their custom domain"
    - "Status indicators show pending/verifying/verified/failed states"
  artifacts:
    - path: "wedding-platform/src/app/(platform)/dashboard/domain/page.tsx"
      provides: "Domain settings page"
      min_lines: 30
    - path: "wedding-platform/src/components/domains/DomainConfigForm.tsx"
      provides: "Domain input and add form"
      exports: ["DomainConfigForm"]
    - path: "wedding-platform/src/components/domains/DnsInstructions.tsx"
      provides: "DNS setup instructions display"
      exports: ["DnsInstructions"]
    - path: "wedding-platform/src/components/domains/VerificationStatus.tsx"
      provides: "Real-time status indicator"
      exports: ["VerificationStatus"]
    - path: "wedding-platform/src/app/(platform)/dashboard/layout.tsx"
      provides: "Dashboard navigation with Domain link"
      contains: "Domain"
  key_links:
    - from: "wedding-platform/src/app/(platform)/dashboard/domain/page.tsx"
      to: "/api/domains/status"
      via: "fetch for initial status"
      pattern: "fetch.*api/domains/status"
    - from: "wedding-platform/src/components/domains/DomainConfigForm.tsx"
      to: "/api/domains/add"
      via: "form submission"
      pattern: "fetch.*api/domains/add"
    - from: "wedding-platform/src/components/domains/VerificationStatus.tsx"
      to: "/api/domains/verify"
      via: "verify button click"
      pattern: "fetch.*api/domains/verify"
---

<objective>
Create domain settings UI for couples to configure and manage their custom domain.

Purpose: Complete the custom domain feature by providing an intuitive interface for couples to add their domain, view DNS configuration instructions, check verification status, and remove their domain if needed. This satisfies COUPLE-06 (Couple can configure custom domain).

Output: Domain settings page in dashboard, domain configuration form, DNS instructions component, verification status component, and updated dashboard navigation.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@wedding-platform/.planning/PROJECT.md
@wedding-platform/.planning/ROADMAP.md
@wedding-platform/.planning/STATE.md
@wedding-platform/.planning/phases/10-custom-domains-polish/10-RESEARCH.md
@wedding-platform/src/app/(platform)/dashboard/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create domain UI components</name>
  <files>
    wedding-platform/src/components/domains/DnsInstructions.tsx
    wedding-platform/src/components/domains/VerificationStatus.tsx
    wedding-platform/src/components/domains/DomainConfigForm.tsx
  </files>
  <action>
1. Create wedding-platform/src/components/domains/DnsInstructions.tsx:
   ```typescript
   "use client"

   import { Copy, Check } from "lucide-react"
   import { useState } from "react"

   interface DnsRecord {
     recordType: "A" | "CNAME"
     name: string
     value: string
     instructions: string
     isApex: boolean
   }

   interface TxtVerification {
     type: "TXT"
     name: string
     value: string
     reason: string
   }

   interface DnsInstructionsProps {
     dnsInstructions: DnsRecord
     txtVerification?: TxtVerification | null
   }

   export function DnsInstructions({
     dnsInstructions,
     txtVerification,
   }: DnsInstructionsProps) {
     const [copiedField, setCopiedField] = useState<string | null>(null)

     const copyToClipboard = async (text: string, field: string) => {
       await navigator.clipboard.writeText(text)
       setCopiedField(field)
       setTimeout(() => setCopiedField(null), 2000)
     }

     return (
       <div className="space-y-4">
         <div>
           <h3 className="text-sm font-medium text-gray-900 mb-2">
             DNS Configuration Required
           </h3>
           <p className="text-sm text-gray-600 mb-4">
             Add the following DNS record at your domain registrar (GoDaddy, Namecheap, Cloudflare, etc.):
           </p>
         </div>

         {/* Primary DNS Record */}
         <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
           <div className="grid grid-cols-3 gap-4 text-sm">
             <div>
               <span className="text-gray-500 block mb-1">Type</span>
               <span className="font-mono font-medium">{dnsInstructions.recordType}</span>
             </div>
             <div>
               <span className="text-gray-500 block mb-1">Name</span>
               <div className="flex items-center gap-2">
                 <span className="font-mono font-medium">{dnsInstructions.name}</span>
                 <button
                   onClick={() => copyToClipboard(dnsInstructions.name, "name")}
                   className="text-gray-400 hover:text-gray-600"
                   title="Copy"
                 >
                   {copiedField === "name" ? (
                     <Check className="h-4 w-4 text-green-500" />
                   ) : (
                     <Copy className="h-4 w-4" />
                   )}
                 </button>
               </div>
             </div>
             <div>
               <span className="text-gray-500 block mb-1">Value</span>
               <div className="flex items-center gap-2">
                 <span className="font-mono font-medium text-xs break-all">
                   {dnsInstructions.value}
                 </span>
                 <button
                   onClick={() => copyToClipboard(dnsInstructions.value, "value")}
                   className="text-gray-400 hover:text-gray-600 flex-shrink-0"
                   title="Copy"
                 >
                   {copiedField === "value" ? (
                     <Check className="h-4 w-4 text-green-500" />
                   ) : (
                     <Copy className="h-4 w-4" />
                   )}
                 </button>
               </div>
             </div>
           </div>
           <p className="text-xs text-gray-500 mt-3">{dnsInstructions.instructions}</p>
         </div>

         {/* TXT Verification (if required) */}
         {txtVerification && (
           <div className="bg-yellow-50 rounded-lg p-4 border border-yellow-200">
             <h4 className="text-sm font-medium text-yellow-800 mb-2">
               Additional Verification Required
             </h4>
             <p className="text-xs text-yellow-700 mb-3">{txtVerification.reason}</p>
             <div className="grid grid-cols-3 gap-4 text-sm">
               <div>
                 <span className="text-yellow-600 block mb-1">Type</span>
                 <span className="font-mono font-medium text-yellow-900">TXT</span>
               </div>
               <div>
                 <span className="text-yellow-600 block mb-1">Name</span>
                 <div className="flex items-center gap-2">
                   <span className="font-mono font-medium text-yellow-900">
                     {txtVerification.name}
                   </span>
                   <button
                     onClick={() => copyToClipboard(txtVerification.name, "txt-name")}
                     className="text-yellow-500 hover:text-yellow-700"
                     title="Copy"
                   >
                     {copiedField === "txt-name" ? (
                       <Check className="h-4 w-4 text-green-500" />
                     ) : (
                       <Copy className="h-4 w-4" />
                     )}
                   </button>
                 </div>
               </div>
               <div>
                 <span className="text-yellow-600 block mb-1">Value</span>
                 <div className="flex items-center gap-2">
                   <span className="font-mono font-medium text-yellow-900 text-xs break-all">
                     {txtVerification.value}
                   </span>
                   <button
                     onClick={() => copyToClipboard(txtVerification.value, "txt-value")}
                     className="text-yellow-500 hover:text-yellow-700 flex-shrink-0"
                     title="Copy"
                   >
                     {copiedField === "txt-value" ? (
                       <Check className="h-4 w-4 text-green-500" />
                     ) : (
                       <Copy className="h-4 w-4" />
                     )}
                   </button>
                 </div>
               </div>
             </div>
           </div>
         )}

         {/* DNS Propagation Note */}
         <div className="bg-blue-50 rounded-lg p-4 border border-blue-200">
           <p className="text-sm text-blue-800">
             <strong>Note:</strong> DNS changes can take up to 48 hours to propagate globally,
             though most changes appear within 1-2 hours. You can click "Check Verification"
             to see if your domain is ready.
           </p>
         </div>
       </div>
     )
   }
   ```

2. Create wedding-platform/src/components/domains/VerificationStatus.tsx:
   ```typescript
   "use client"

   import { useState } from "react"
   import { RefreshCw, CheckCircle, XCircle, Clock, AlertCircle } from "lucide-react"

   type DomainStatus = "NONE" | "PENDING" | "VERIFYING" | "VERIFIED" | "FAILED"

   interface VerificationStatusProps {
     status: DomainStatus
     customDomain: string | null
     verifiedAt: string | null
     onVerify: () => Promise<{ verified: boolean; error?: string }>
     onRemove: () => Promise<{ success: boolean; error?: string }>
   }

   const statusConfig: Record<DomainStatus, {
     label: string
     icon: typeof CheckCircle
     color: string
     bgColor: string
   }> = {
     NONE: {
       label: "No Domain",
       icon: AlertCircle,
       color: "text-gray-500",
       bgColor: "bg-gray-100",
     },
     PENDING: {
       label: "Pending DNS Setup",
       icon: Clock,
       color: "text-yellow-600",
       bgColor: "bg-yellow-100",
     },
     VERIFYING: {
       label: "Verifying",
       icon: RefreshCw,
       color: "text-blue-600",
       bgColor: "bg-blue-100",
     },
     VERIFIED: {
       label: "Verified",
       icon: CheckCircle,
       color: "text-green-600",
       bgColor: "bg-green-100",
     },
     FAILED: {
       label: "Verification Failed",
       icon: XCircle,
       color: "text-red-600",
       bgColor: "bg-red-100",
     },
   }

   export function VerificationStatus({
     status,
     customDomain,
     verifiedAt,
     onVerify,
     onRemove,
   }: VerificationStatusProps) {
     const [isVerifying, setIsVerifying] = useState(false)
     const [isRemoving, setIsRemoving] = useState(false)
     const [error, setError] = useState<string | null>(null)

     const config = statusConfig[status]
     const Icon = config.icon

     const handleVerify = async () => {
       setIsVerifying(true)
       setError(null)
       try {
         const result = await onVerify()
         if (!result.verified && result.error) {
           setError(result.error)
         }
       } catch (err) {
         setError("Verification failed. Please try again.")
       } finally {
         setIsVerifying(false)
       }
     }

     const handleRemove = async () => {
       if (!confirm("Are you sure you want to remove this custom domain?")) {
         return
       }
       setIsRemoving(true)
       setError(null)
       try {
         const result = await onRemove()
         if (!result.success && result.error) {
           setError(result.error)
         }
       } catch (err) {
         setError("Failed to remove domain. Please try again.")
       } finally {
         setIsRemoving(false)
       }
     }

     if (!customDomain) {
       return null
     }

     return (
       <div className="space-y-4">
         {/* Status Badge */}
         <div className="flex items-center justify-between">
           <div className="flex items-center gap-3">
             <div className={`p-2 rounded-full ${config.bgColor}`}>
               <Icon className={`h-5 w-5 ${config.color} ${status === "VERIFYING" ? "animate-spin" : ""}`} />
             </div>
             <div>
               <p className="font-medium text-gray-900">{customDomain}</p>
               <p className={`text-sm ${config.color}`}>{config.label}</p>
             </div>
           </div>
           {status === "VERIFIED" && verifiedAt && (
             <p className="text-xs text-gray-500">
               Verified {new Date(verifiedAt).toLocaleDateString()}
             </p>
           )}
         </div>

         {/* Error Message */}
         {error && (
           <div className="bg-red-50 text-red-700 text-sm p-3 rounded-lg">
             {error}
           </div>
         )}

         {/* Actions */}
         <div className="flex gap-3">
           {status !== "VERIFIED" && (
             <button
               onClick={handleVerify}
               disabled={isVerifying}
               className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
             >
               <RefreshCw className={`h-4 w-4 ${isVerifying ? "animate-spin" : ""}`} />
               {isVerifying ? "Checking..." : "Check Verification"}
             </button>
           )}
           <button
             onClick={handleRemove}
             disabled={isRemoving}
             className="flex items-center gap-2 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed"
           >
             {isRemoving ? "Removing..." : "Remove Domain"}
           </button>
         </div>

         {/* SSL Note for Verified Domains */}
         {status === "VERIFIED" && (
           <div className="bg-green-50 rounded-lg p-4 border border-green-200">
             <p className="text-sm text-green-800">
               <strong>SSL Active:</strong> Your custom domain is verified and has a valid SSL certificate.
               Guests can visit your wedding site at{" "}
               <a
                 href={`https://${customDomain}`}
                 target="_blank"
                 rel="noopener noreferrer"
                 className="underline font-medium"
               >
                 https://{customDomain}
               </a>
             </p>
           </div>
         )}
       </div>
     )
   }
   ```

3. Create wedding-platform/src/components/domains/DomainConfigForm.tsx:
   ```typescript
   "use client"

   import { useState } from "react"
   import { Globe } from "lucide-react"

   interface DomainConfigFormProps {
     onAdd: (domain: string) => Promise<{
       success: boolean
       error?: string
     }>
   }

   export function DomainConfigForm({ onAdd }: DomainConfigFormProps) {
     const [domain, setDomain] = useState("")
     const [isSubmitting, setIsSubmitting] = useState(false)
     const [error, setError] = useState<string | null>(null)

     const handleSubmit = async (e: React.FormEvent) => {
       e.preventDefault()
       setIsSubmitting(true)
       setError(null)

       // Basic client-side validation
       const trimmedDomain = domain.trim().toLowerCase()
       if (!trimmedDomain) {
         setError("Please enter a domain")
         setIsSubmitting(false)
         return
       }

       // Remove protocol if accidentally included
       const cleanDomain = trimmedDomain
         .replace(/^https?:\/\//, "")
         .replace(/\/$/, "")

       try {
         const result = await onAdd(cleanDomain)
         if (!result.success) {
           setError(result.error || "Failed to add domain")
         } else {
           setDomain("")
         }
       } catch (err) {
         setError("Failed to add domain. Please try again.")
       } finally {
         setIsSubmitting(false)
       }
     }

     return (
       <form onSubmit={handleSubmit} className="space-y-4">
         <div>
           <label
             htmlFor="domain"
             className="block text-sm font-medium text-gray-700 mb-1"
           >
             Custom Domain
           </label>
           <div className="relative">
             <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
               <Globe className="h-5 w-5 text-gray-400" />
             </div>
             <input
               type="text"
               id="domain"
               value={domain}
               onChange={(e) => setDomain(e.target.value)}
               placeholder="yourwedding.com"
               className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
               disabled={isSubmitting}
             />
           </div>
           <p className="mt-1 text-xs text-gray-500">
             Enter the domain you own, e.g., yourwedding.com or www.yourwedding.com
           </p>
         </div>

         {error && (
           <div className="bg-red-50 text-red-700 text-sm p-3 rounded-lg">
             {error}
           </div>
         )}

         <button
           type="submit"
           disabled={isSubmitting || !domain.trim()}
           className="w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
         >
           {isSubmitting ? "Adding Domain..." : "Add Custom Domain"}
         </button>
       </form>
     )
   }
   ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - All three component files exist in wedding-platform/src/components/domains/
    - Components use "use client" directive
    - DnsInstructions shows copy buttons and handles both A/CNAME and TXT records
    - VerificationStatus shows all status states with appropriate styling
    - DomainConfigForm validates and submits domain
  </verify>
  <done>Domain UI components created with copy-to-clipboard, status indicators, and form validation</done>
</task>

<task type="auto">
  <name>Task 2: Create domain settings page and update navigation</name>
  <files>
    wedding-platform/src/app/(platform)/dashboard/domain/page.tsx
    wedding-platform/src/app/(platform)/dashboard/layout.tsx
  </files>
  <action>
1. Create wedding-platform/src/app/(platform)/dashboard/domain/page.tsx:
   ```typescript
   "use client"

   import { useEffect, useState, useCallback } from "react"
   import { DomainConfigForm } from "@/components/domains/DomainConfigForm"
   import { DnsInstructions } from "@/components/domains/DnsInstructions"
   import { VerificationStatus } from "@/components/domains/VerificationStatus"
   import { Globe } from "lucide-react"

   type DomainStatus = "NONE" | "PENDING" | "VERIFYING" | "VERIFIED" | "FAILED"

   interface DnsRecord {
     recordType: "A" | "CNAME"
     name: string
     value: string
     instructions: string
     isApex: boolean
   }

   interface TxtVerification {
     type: "TXT"
     name: string
     value: string
     reason: string
   }

   interface DomainStatusData {
     status: DomainStatus
     customDomain: string | null
     verified: boolean
     dnsInstructions: DnsRecord | null
     txtVerification: TxtVerification | null
     addedAt: string | null
     verifiedAt: string | null
   }

   export default function DomainSettingsPage() {
     const [statusData, setStatusData] = useState<DomainStatusData | null>(null)
     const [isLoading, setIsLoading] = useState(true)
     const [error, setError] = useState<string | null>(null)

     const fetchStatus = useCallback(async () => {
       try {
         const response = await fetch("/api/domains/status")
         if (!response.ok) {
           throw new Error("Failed to fetch domain status")
         }
         const data = await response.json()
         setStatusData(data)
         setError(null)
       } catch (err) {
         setError("Failed to load domain settings")
         console.error(err)
       } finally {
         setIsLoading(false)
       }
     }, [])

     useEffect(() => {
       fetchStatus()
     }, [fetchStatus])

     const handleAddDomain = async (domain: string) => {
       const response = await fetch("/api/domains/add", {
         method: "POST",
         headers: { "Content-Type": "application/json" },
         body: JSON.stringify({ domain }),
       })

       const data = await response.json()

       if (!response.ok) {
         return { success: false, error: data.error }
       }

       // Refresh status after adding
       await fetchStatus()
       return { success: true }
     }

     const handleVerify = async () => {
       const response = await fetch("/api/domains/verify", {
         method: "POST",
       })

       const data = await response.json()

       // Refresh status after verification attempt
       await fetchStatus()

       return {
         verified: data.verified ?? false,
         error: data.error,
       }
     }

     const handleRemove = async () => {
       const response = await fetch("/api/domains/remove", {
         method: "DELETE",
       })

       const data = await response.json()

       if (response.ok) {
         // Refresh status after removal
         await fetchStatus()
       }

       return {
         success: response.ok,
         error: data.error,
       }
     }

     if (isLoading) {
       return (
         <div className="flex items-center justify-center min-h-[400px]">
           <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
         </div>
       )
     }

     if (error) {
       return (
         <div className="bg-red-50 text-red-700 p-4 rounded-lg">
           {error}
         </div>
       )
     }

     const hasDomain = statusData?.customDomain && statusData.status !== "NONE"

     return (
       <div className="space-y-6">
         {/* Header */}
         <div>
           <h1 className="text-2xl font-semibold text-gray-900">Custom Domain</h1>
           <p className="text-gray-600 mt-1">
             Use your own domain for your wedding website (e.g., aliceandbobwedding.com)
           </p>
         </div>

         {/* Main Content */}
         <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
           {!hasDomain ? (
             /* No domain configured - show form */
             <div className="max-w-md">
               <div className="flex items-center gap-3 mb-6">
                 <div className="p-2 bg-blue-100 rounded-full">
                   <Globe className="h-6 w-6 text-blue-600" />
                 </div>
                 <div>
                   <h2 className="font-medium text-gray-900">Add Your Domain</h2>
                   <p className="text-sm text-gray-500">
                     Connect a domain you own to your wedding site
                   </p>
                 </div>
               </div>
               <DomainConfigForm onAdd={handleAddDomain} />
             </div>
           ) : (
             /* Domain configured - show status and instructions */
             <div className="space-y-6">
               {/* Verification Status */}
               <VerificationStatus
                 status={statusData!.status}
                 customDomain={statusData!.customDomain}
                 verifiedAt={statusData!.verifiedAt}
                 onVerify={handleVerify}
                 onRemove={handleRemove}
               />

               {/* DNS Instructions (show when pending or failed) */}
               {statusData!.status !== "VERIFIED" &&
                 statusData!.dnsInstructions && (
                   <div className="border-t border-gray-200 pt-6">
                     <DnsInstructions
                       dnsInstructions={statusData!.dnsInstructions}
                       txtVerification={statusData!.txtVerification}
                     />
                   </div>
                 )}
             </div>
           )}
         </div>

         {/* Info Section */}
         <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
           <h3 className="font-medium text-gray-900 mb-2">How it works</h3>
           <ol className="text-sm text-gray-600 space-y-2 list-decimal list-inside">
             <li>Enter the domain you own (you must have access to its DNS settings)</li>
             <li>Add the DNS records shown to your domain registrar</li>
             <li>Click "Check Verification" once you've configured DNS</li>
             <li>Once verified, your wedding site will be available at your custom domain with HTTPS</li>
           </ol>
         </div>
       </div>
     )
   }
   ```

2. Update wedding-platform/src/app/(platform)/dashboard/layout.tsx to add Domain to navigation:
   Add Globe icon import and Domain nav item.

   Update the imports to include Globe:
   ```typescript
   import {
     Home,
     Palette,
     FileText,
     Users,
     Calendar,
     CheckSquare,
     Gift,
     Camera,
     Mail,
     Grid3X3,
     Globe
   } from "lucide-react"
   ```

   Add Domain to navItems array (after Seating):
   ```typescript
   const navItems = [
     { href: "/dashboard", label: "Dashboard", icon: Home },
     { href: "/dashboard/templates", label: "Templates", icon: Palette },
     { href: "/dashboard/theme", label: "Theme", icon: Palette },
     { href: "/dashboard/content", label: "Content", icon: FileText },
     { href: "/dashboard/events", label: "Events", icon: Calendar },
     { href: "/dashboard/guests", label: "Guests", icon: Users },
     { href: "/dashboard/rsvp", label: "RSVPs", icon: CheckSquare },
     { href: "/dashboard/registry", label: "Registry", icon: Gift },
     { href: "/dashboard/photos", label: "Photos", icon: Camera },
     { href: "/dashboard/messaging", label: "Messaging", icon: Mail },
     { href: "/dashboard/seating", label: "Seating", icon: Grid3X3 },
     { href: "/dashboard/domain", label: "Domain", icon: Globe },
   ]
   ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - wedding-platform/src/app/(platform)/dashboard/domain/page.tsx exists
    - Dashboard layout includes Domain in navItems
    - Domain page fetches status on mount
    - Domain page handles add/verify/remove operations
  </verify>
  <done>Domain settings page created with full lifecycle (add, verify, remove), navigation updated</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete custom domain configuration feature including:
- Domain settings page at /dashboard/domain
- DNS instructions with copy-to-clipboard
- Verification status with check/remove actions
- Dashboard navigation with Domain link
- API routes for domain management
- Middleware routing for custom domains
  </what-built>
  <how-to-verify>
1. Start dev server: `cd wedding-platform && npm run dev`
2. Log in as a couple user
3. Navigate to Dashboard -> Domain (should see Globe icon in nav)
4. Verify the "Add Your Domain" form appears
5. (Optional) Add a test domain and verify:
   - DNS instructions display with A or CNAME record based on domain type
   - Copy buttons work for DNS values
   - Status shows as Pending
   - Check Verification button triggers API call
   - Remove Domain button works

Note: Full domain verification requires:
- VERCEL_API_TOKEN, VERCEL_PROJECT_ID configured
- Actual DNS records configured at domain registrar
- DNS propagation (can take hours)

For testing without Vercel credentials, verify UI renders correctly and API calls are attempted (will fail gracefully without credentials).
  </how-to-verify>
  <resume-signal>Type "approved" if UI works correctly, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npx tsc --noEmit` compiles without errors
2. Domain settings page accessible at /dashboard/domain
3. Dashboard navigation includes Domain link with Globe icon
4. Components exist:
   - wedding-platform/src/components/domains/DomainConfigForm.tsx
   - wedding-platform/src/components/domains/DnsInstructions.tsx
   - wedding-platform/src/components/domains/VerificationStatus.tsx
5. UI shows:
   - Add domain form when no domain configured
   - DNS instructions and verification status when domain configured
   - Appropriate status badges (pending/verifying/verified/failed)
</verification>

<success_criteria>
- Couple can navigate to domain settings from dashboard
- Couple can enter and submit custom domain
- DNS instructions display with correct records (A for apex, CNAME for subdomain)
- Copy-to-clipboard works for DNS values
- Verification status updates after check
- Remove domain functionality works
- All states properly styled with icons and colors
</success_criteria>

<output>
After completion, create `.planning/phases/10-custom-domains-polish/10-03-SUMMARY.md`
</output>
