---
phase: 03-content-builder
plan: 06
type: execute
wave: 3
depends_on: ["03-02", "03-03", "03-04"]
files_modified:
  - src/app/[domain]/page.tsx
  - src/app/[domain]/layout.tsx
  - src/components/content/ContentSection.tsx
  - src/components/content/sections/EventDetailsSection.tsx
  - src/components/content/sections/OurStorySection.tsx
  - src/components/content/sections/TravelSection.tsx
  - src/components/content/sections/GallerySection.tsx
  - src/components/content/sections/TimelineSection.tsx
  - src/components/content/sections/ContactSection.tsx
autonomous: false

must_haves:
  truths:
    - "Guest visiting wedding site sees couple's theme colors and fonts"
    - "Guest sees all visible content sections in correct order"
    - "Event Details section shows event date, time, location"
    - "Gallery section displays uploaded photos"
    - "Each section type renders its content appropriately"
  artifacts:
    - path: "src/app/[domain]/page.tsx"
      provides: "Public wedding site with theme and sections"
      min_lines: 50
    - path: "src/components/content/ContentSection.tsx"
      provides: "Section router component"
      min_lines: 30
    - path: "src/components/content/sections/EventDetailsSection.tsx"
      provides: "Event details display for guests"
      min_lines: 40
    - path: "src/components/content/sections/GallerySection.tsx"
      provides: "Photo gallery display for guests"
      min_lines: 40
  key_links:
    - from: "src/app/[domain]/page.tsx"
      to: "src/components/theme/ThemeProvider.tsx"
      via: "theme application"
      pattern: "ThemeProvider"
    - from: "src/app/[domain]/page.tsx"
      to: "src/components/content/ContentSection.tsx"
      via: "section rendering"
      pattern: "ContentSection"
---

<objective>
Create the public-facing wedding site that renders the couple's customized theme and content sections for guests to view.

Purpose: This is what wedding guests see. The theme customization and content sections created in earlier plans now need to be displayed publicly. Guests should see a beautiful, themed wedding site with all the couple's content.

Output: Updated public site ([domain]/page.tsx) that applies theme colors/fonts and renders all visible content sections in order.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@wedding-platform/.planning/PROJECT.md
@wedding-platform/.planning/ROADMAP.md
@wedding-platform/.planning/phases/03-content-builder/03-RESEARCH.md

# From earlier plans
@wedding-platform/src/components/theme/ThemeProvider.tsx
@wedding-platform/src/types/prisma-json.d.ts
@wedding-platform/src/lib/content/theme-utils.ts

# Current public site
@wedding-platform/src/app/[domain]/page.tsx
@wedding-platform/src/app/[domain]/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create section display components</name>
  <files>
    - src/components/content/ContentSection.tsx
    - src/components/content/sections/EventDetailsSection.tsx
    - src/components/content/sections/OurStorySection.tsx
    - src/components/content/sections/TravelSection.tsx
  </files>
  <action>
Create src/components/content/ContentSection.tsx:
- Props: section (ContentSection)
- Router component that renders appropriate section component based on type
- Maps section.type to corresponding component
- Passes section.content to the appropriate typed component
- Wraps each section in semantic element with id for anchor links

Create src/components/content/sections/EventDetailsSection.tsx:
- Props: content (EventDetailsContent)
- Displays list of events
- Each event shows:
  - Event name (heading)
  - Date formatted nicely (Saturday, June 15, 2025)
  - Time (4:00 PM)
  - Location name
  - Address (link to Google Maps)
  - Dress code if provided
  - Description if provided
- Themed styling: bg-wedding-background, text-wedding-text, headings in text-wedding-primary
- Mobile-friendly card layout

Create src/components/content/sections/OurStorySection.tsx:
- Props: content (OurStoryContent)
- Displays title (font-wedding-heading)
- Story text with proper paragraph formatting
- If photos exist, display in a small gallery below story
- Themed styling

Create src/components/content/sections/TravelSection.tsx:
- Props: content (TravelContent)
- Displays hotels as cards:
  - Hotel name, address, phone (clickable tel: link)
  - Website link, booking code
  - Notes
- Directions section if provided
- Airport info section if provided
- Themed styling
  </action>
  <verify>
- Components render without error
- Section types have correct TypeScript typing
- Styling uses Tailwind wedding-* classes
  </verify>
  <done>ContentSection router and Event Details, Our Story, Travel display components created</done>
</task>

<task type="auto">
  <name>Task 2: Create Gallery, Timeline, and Contact section components</name>
  <files>
    - src/components/content/sections/GallerySection.tsx
    - src/components/content/sections/TimelineSection.tsx
    - src/components/content/sections/ContactSection.tsx
  </files>
  <action>
Create src/components/content/sections/GallerySection.tsx:
- Props: content (GalleryContent)
- Title heading
- Photo grid: responsive grid (1 col mobile, 2 tablet, 3 desktop)
- Each photo:
  - Use next/image with Vercel Blob URL
  - Display caption below if provided
  - Lightbox optional (can be future enhancement, for now just grid)
- Handle empty gallery gracefully
- Lazy loading for performance

Create src/components/content/sections/TimelineSection.tsx:
- Props: content (TimelineContent)
- Title heading (e.g., "Wedding Day Schedule")
- Vertical timeline layout:
  - Time on left (or top on mobile)
  - Event title and description on right
  - Visual connector line between events
- Themed with wedding colors
- Mobile-friendly single column

Create src/components/content/sections/ContactSection.tsx:
- Props: content (ContactContent)
- Title heading
- Contact cards in grid:
  - Name and role
  - Email (mailto: link)
  - Phone (tel: link)
- Optional message displayed below contacts
- Themed styling
  </action>
  <verify>
- Gallery displays images from Vercel Blob URLs
- Timeline shows events in chronological order
- Contact links are clickable (mailto, tel)
  </verify>
  <done>Gallery, Timeline, and Contact display components created</done>
</task>

<task type="auto">
  <name>Task 3: Update public wedding site to render theme and sections</name>
  <files>
    - src/app/[domain]/page.tsx
    - src/app/[domain]/layout.tsx
  </files>
  <action>
Update src/app/[domain]/layout.tsx:
- Import Google Fonts (should already be in root layout, but ensure domain layout inherits)
- Set up basic layout structure for wedding sites
- Can keep minimal since page handles theme

Update src/app/[domain]/page.tsx:
- Fetch wedding with tenant lookup (existing pattern)
- Load themeSettings and contentSections from wedding
- Parse themeSettings as ThemeSettings type (with fallback to DEFAULT_THEME)
- Filter contentSections to only isVisible === true
- Sort by order field
- Wrap entire page in ThemeProvider with theme
- Render:
  1. Hero section:
     - Partner names in font-wedding-heading, text-wedding-primary
     - Wedding date formatted
     - Optional: hero image or decorative element
  2. Navigation (optional): anchor links to sections
  3. Content sections: map over visible sections, render ContentSection for each
  4. Footer with couple names
- Ensure responsive design (mobile-first)
- Apply bg-wedding-background to main container

Test with empty theme/sections (should show defaults or graceful empty state).
  </action>
  <verify>
- Navigate to tenant subdomain (e.g., alice.localhost:3000)
- See couple names in heading
- Theme colors visible (primary color on text, background color applied)
- Content sections display in order
- Sections can be scrolled to
  </verify>
  <done>Public wedding site renders couple's theme and all visible content sections</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete public wedding site with customized theme and content sections:
- Theme colors and fonts applied from couple's customization
- All 6 section types render their content
- Sections display in couple-defined order
- Only visible sections shown
  </what-built>
  <how-to-verify>
1. Create a test wedding with couple account (or use existing)
2. Log in as couple, go to /dashboard/templates
3. Select "Modern Minimal" template
4. Go to /dashboard/theme, change primary color to red (#EF4444)
5. Go to /dashboard/content, add sections: Event Details, Our Story, Gallery
6. Edit Event Details: Add ceremony event with date, time, location
7. Edit Our Story: Add title and story text
8. Edit Gallery: Upload 2 test images
9. Toggle Our Story visibility to hidden
10. Visit public site at subdomain (e.g., alice.localhost:3000)
11. Verify:
    - Primary color is red
    - Fonts are Inter/Montserrat (Modern template)
    - Event Details section shows ceremony info
    - Our Story is NOT visible (hidden)
    - Gallery shows uploaded images
    - Sections are in correct order
  </how-to-verify>
  <resume-signal>Type "approved" if public site displays correctly with theme and content, or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. Public site loads at tenant subdomain
2. Theme verification:
   - Background color matches themeSettings.backgroundColor
   - Primary text color matches themeSettings.primaryColor
   - Heading font matches themeSettings.headingFont
   - Body font matches themeSettings.fontFamily
3. Section verification:
   - Only isVisible=true sections render
   - Sections render in order field sequence
   - Each section type displays its content correctly
4. Content verification:
   - Event details show date, time, location
   - Our Story shows title and text
   - Travel shows hotels and directions
   - Gallery shows uploaded images
   - Timeline shows schedule events
   - Contact shows contact info with clickable links
5. Mobile responsiveness: Site looks good on phone viewport
</verification>

<success_criteria>
- Guest visiting wedding site URL sees customized theme (colors, fonts)
- All visible content sections display in configured order
- Event Details shows events with formatted dates and locations
- Gallery displays uploaded photos
- All section types render appropriately
- Hidden sections do not appear
- Site is responsive and mobile-friendly
- Human verification confirms end-to-end flow works
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-builder/03-06-SUMMARY.md`
</output>
